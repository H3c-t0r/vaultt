{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: BUSL-1.1
~}}
{{! TODO delete component & tests when dashboard page component deleted }}
<Clients::ChartContainer
  @title="Monthly new"
  @description="Entity or non-entity clients which interacted with Vault for the first time during this date range, displayed per month."
  @timestamp={{@responseTimestamp}}
  @hasChartData={{this.hasAverageNewClients}}
  class={{unless this.hasAverageNewClients "no-legend"}}
  data-test-chart="monthly new"
>
  <:chart>
    <Clients::VerticalBarChart @dataset={{this.byMonthNewClients}} @chartLegend={{this.runningTotalLegend}} />
  </:chart>

  <:emptyState>
    <EmptyState
      @title="No new clients"
      @subTitle="There is no new client data available for this {{if
        @mountPath
        'auth method'
        'namespace'
      }} in this date range."
      @bottomBorder={{true}}
    />
  </:emptyState>

  <:stats>
    <StatText
      @label="Average new entity clients per month"
      @value={{this.entityClientData.averageNewClients}}
      @size="m"
      class="chart-subTitle has-top-padding-l"
      data-test-monthly-new-entity
    />

    <StatText
      @label="Average new non-entity clients per month"
      @value={{this.nonEntityClientData.averageNewClients}}
      @size="m"
      class="data-details-top has-top-padding-l"
      data-test-monthly-new-nonentity
    />
  </:stats>

  <:legend>
    <div class="legend" data-test-monthly-new-legend>
      {{#each this.runningTotalLegend as |legend idx|}}
        <span class="legend-colors dot-{{idx}}"></span><span class="legend-label">{{capitalize legend.label}}</span>
      {{/each}}
    </div>
  </:legend>
</Clients::ChartContainer>