/**
 * Copyright (c) HashiCorp, Inc.
 * SPDX-License-Identifier: BUSL-1.1
 */

// This file defines the style for switch, with the nested classes: is-small, is-rounded, is-success

.switch[type='checkbox'] {
  display: inline-block;
  outline: 0;
  opacity: 0;
  position: absolute;
  user-select: none;

  + label {
    align-items: center;
    cursor: pointer;
    display: inline-flex;
    font-size: $size-6;
    justify-content: flex-start;
    line-height: 1.5;
    padding-left: 3.5rem;
    position: relative;

    &::before {
      position: absolute;
      display: block;
      top: calc(50% - 1.5rem * 0.5);
      left: 0;
      width: $spacing-42;
      height: $spacing-20;
      border: 0.1rem solid transparent;
      border-radius: $radius-large;
      background: $ui-gray-300;
      content: '';
    }

    &::after {
      background: $white;
      border-radius: $radius-large;
      content: '';
      display: block;
      height: $spacing-14;
      left: $spacing-4;
      position: absolute;
      top: calc(50% - 1rem * 0.5);
      transform: translate3d(0, 0, 0);
      transition: all 0.25s ease-out;
      width: $spacing-14;
    }

    &:checked::after {
      left: 1.625rem;
    }
  }
}

// TODO is this why the toggles are off???
// is-rounded
.switch[type='checkbox'].is-rounded {
  + label {
    &::before {
      border-radius: 16px;
    }
    &::after {
      border-radius: 50%;
    }
  }
  &.is-small {
    + label {
      &::before {
        border-radius: 16px;
      }
      &::after {
        border-radius: 50%;
      }
    }
  }
}
// is-small
.switch[type='checkbox'].is-small {
  + label {
    cursor: pointer;
    display: inline-block;
    font-size: $size-8;
    font-weight: bold;
    height: 18px;
    padding-left: $spacing-12 * 2.5;
    position: relative;
    margin: 0 $spacing-4;
    &::before {
      border: 0.1rem solid transparent;
      border-radius: $radius-large;
      background: $ui-gray-300;
      display: block;
      content: '';
      height: $spacing-12;
      position: absolute;
      top: calc($spacing-12 / 5);
      width: $spacing-12 * 2;
    }
    &::after {
      background: $white;
      border-radius: $radius-large;
      content: '';
      display: block;
      height: $spacing-12 * 0.8;
      left: 0;
      position: absolute;
      top: calc($spacing-12 / 4);
      transform: translateX(0.15rem);
      transition: all 0.25s ease-out;
      width: $spacing-12 * 0.8;
      will-change: left;

      &:checked {
        left: $spacing-18;
      }
    }
  }
  &:checked + label::after {
    left: 0;
    transform: translateX(($size-8 * 2) - ($size-8 * 0.94));
  }
}

// is-success
.switch[type='checkbox'].is-success:checked + label::before {
  background: $blue;
}

// focus
.switch[type='checkbox']:focus + label {
  box-shadow: 0 0 1px $blue;
}

// disabled
.switch[type='checkbox'][disabled] {
  cursor: not-allowed;
}

.switch[type='checkbox'][disabled] + label {
  opacity: 0.5;
}

.switch[type='checkbox'][disabled] + label:hover {
  cursor: not-allowed;
}

// misc.
.field-body .switch[type='checkbox'] + label {
  margin-top: 0.375em;
}
