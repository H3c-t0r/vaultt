<form onsubmit={{action "createOrUpdateKey" "update"}}>
  <div class="box is-sideless is-fullwidth is-marginless is-paddingless">
    <MessageError @model={{model}} @errorMessage={{error}} />
    <NamespaceReminder @mode="edit" @noun="secret" />
    {{#if (and this.canEditV2Secret this.isV2)}}
    <div class="form-section box is-shadowless is-fullwidth">
      <label class="title is-5">
        Secret Metadata
      </label>
      {{#each this.model.fields as |attr|}}
        <FormField data-test-field @attr={{attr}} @model={{this.model}} />
      {{/each}}
    </div>
    {{/if}}
  <SecretEditDisplay
    @showAdvancedMode={{showAdvancedMode}}
    @codemirrorString={{codemirrorString}}
    @secretData={{secretData}}
    @isV2={{isV2}}
    @editActions={{hash
      codemirrorUpdated=(action "codemirrorUpdated")
      formatJSON=(action "formatJSON")
      handleKeyDown=(action "handleKeyDown")
      handleChange=(action "handleChange")
      deleteRow=(action "deleteRow")
      addRow=(action "addRow")
    }}
  />
  </div>
  <div class="field is-grouped is-grouped-split is-fullwidth box is-bottomless">
    <div class="field is-grouped">
      <div class="control">
        <button
          type="submit"
          disabled={{buttonDisabled}}
          class="button is-primary"
        >
          Save
        </button>
      </div>
      <div class="control">
        {{#secret-link
          mode="show"
          secret=model.id
          class="button"
        }}
          Cancel
        {{/secret-link}}
      </div>
    </div>
  </div>
</form>
