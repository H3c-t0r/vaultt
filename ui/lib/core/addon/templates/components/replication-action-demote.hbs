<div class="action-block is-rounded" data-test-demote-replication>
  <div class="action-block-info">
    <h4 class="title is-5 is-marginless">
      Demote cluster
    </h4>
    <p>
      Demote this {{if (eq model.replicationMode "dr") "Disaster Recovery" "Performance"}} primary to a secondary.
    </p>
  </div>
  <div class="action-block-action">
    <button
      class="button is-secondary"
      onclick={{action (mut isModalActive) true}}
      data-test-replication-action-trigger
    >
      Demote
    </button>
  </div>
</div>

<ConfirmationModal
  @title="Demote to secondary?"
  @onClose={{action (mut isModalActive) false}}
  @isActive={{isModalActive}}
  @buttonClass="is-primary"
  @confirmText={{if (eq replicationDisplayMode "DR") "Disaster Recovery" replicationDisplayMode}}
  @toConfirmMsg="demoting this {{replicationDisplayMode}} primary to a secondary"
  @onConfirm={{action "onSubmit" "demote" model.replicationAttrs.modeForUrl}}
>
  <p class="has-bottom-margin-m">
    {{#if (and model.replicationAttrs.isPrimary (eq replicationDisplayMode "DR"))}}This cannot be undone. {{/if}}
    Demoting this {{replicationDisplayMode}} primary to a {{replicationDisplayMode}} secondary means that the resulting secondary cluster:
  </p>
  <ul class="bullet has-bottom-margin-m">
    <li>Will not attempt to connect to a primary</li>
    <li>Will maintain knowledge of its cluster ID</li>
    <li>Can be reconnected to the same set of replication clusters without wiping local storage.</li>
  </ul>
  <p class="has-bottom-margin-m">
    To connect the resulting secondary to a new primary, use the Update primary action.
  </p>
</ConfirmationModal>
