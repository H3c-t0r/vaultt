<TabPageHeader @model={{@model.backend}}>
  <ToolbarLink @route="configure" data-test-toolbar-config-action>
    {{if @model.config "Edit configuration" "Configure Kubernetes"}}
  </ToolbarLink>
</TabPageHeader>

{{#if @model.config}}
  {{#if @model.config.disableLocalCaJwt}}
    <InfoTableRow @label="Kubernetes host" @value={{@model.config.kubernetesHost}} />
    <InfoTableRow @label="Certificate">
      <div class="column is-half box is-rounded">
        <div class="is-flex-row">
          <span class="has-left-margin-s">
            <Icon @name="certificate" @size="24" data-test-certificate-icon />
          </span>
          <div class="has-left-margin-m is-min-width-0">
            <p class="has-text-weight-bold" data-test-certificate-label>
              PEM Format
            </p>
            <code class="is-size-8 truncate-second-line has-text-grey" data-test-certificate-value>
              {{@model.config.kubernetesCaCert}}
            </code>
          </div>
          <div class="is-flex has-background-grey-lighter has-side-padding-s has-top-bottom-margin-negative-m">
            <CopyButton
              data-test-certificate-copy
              class="button is-transparent is-flex-v-centered"
              @clipboardText={{@model.config.kubernetesCaCert}}
              @buttonType="button"
              @success={{action (set-flash-message "Certificate copied")}}
            >
              <Icon @name="clipboard-copy" aria-label="Copy" />
            </CopyButton>
          </div>
        </div>
      </div>
    </InfoTableRow>
  {{else}}
    <div class="has-top-margin-l" data-test-inferred-message>
      <Icon @name="check-circle-fill" class="has-text-green" />
      <span>
        These details were successfully inferred from Vaultâ€™s kubernetes environment and were not explicity set in this
        config.
      </span>
    </div>
  {{/if}}
{{else}}
  <ConfigCta />
{{/if}}