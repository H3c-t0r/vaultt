{{#if this.credentials}}
  <Page::CredentialsView @credentials={{this.credentials}} />
{{else}}
  <PageHeader as |p|>
    <p.levelLeft>
      <h1 class="title is-3 has-bottom-margin-2">
        Generate Credentials
      </h1>
    </p.levelLeft>
  </PageHeader>

  <div class="box is-sideless is-fullwidth is-marginless">
    <p>This will generate credentials using the role rolename.</p>

    {{#if this.error}}
      <MessageError class="has-top-margin-l" @errorMessage={{this.error}} />
    {{/if}}

    <div class="field has-top-margin-l">
      <label for="token" class="is-label">Kubernetes namespace</label>
      <div class="has-text-grey is-size-8 has-bottom-margin-xs">
        The namespace in which to generate the credentials.
      </div>
      <Input @type="text" @value={{this.kubernetesNamespace}} class="input" {{on "input" this.setKubernetesNamespace}} />

      <div class="has-top-margin-l has-bottom-margin-l">
        <Toggle
          @status="success"
          @size="small"
          @checked={{this.clusterRoleBinding}}
          @onChange={{(toggle-action "clusterRoleBinding" this)}}
        >
          <h3 class="title is-7 is-marginless">ClusterRoleBinding</h3>
          <div class="description has-text-grey">
            <span>
              Generate a ClusterRoleBinding to grant permissions across the whole cluster instead of within a namespace. This
              requires the Vault role to have kubernetes_role_type set to ClusterRole.
            </span>
          </div>
        </Toggle>
      </div>

      <TtlPicker2
        class="has-top-margin-l has-bottom-margin-l"
        @initialEnabled={{false}}
        @label="Time-to-Live (TTL)"
        @onChange={{this.updateTtl}}
        @helperTextDisabled="The TTL of the generated Kubernetes service account token. Defaults to the roleâ€™s default TTL, or the default system TTL."
      />
    </div>
  </div>

  <div class="has-top-margin-l">
    <button class="button is-primary" type="button" {{on "click" (perform this.fetchCredentials)}}>
      Generate credentials
    </button>
    <button class="button has-left-margin-xs" type="button">
      Back
    </button>
  </div>
{{/if}}