<PageHeader as |p|>
  <p.top>
    <KeyValueHeader
      @root={{hash label="role" text="role" path="vault.cluster.secrets.backend.pki.roles.index"}}
      @isEngine={{true}}
    >
      <li>
        <span class="sep">
          /
        </span>
        <LinkTo @route="roles.index">
          {{@model.backend}}
        </LinkTo>
      </li>
    </KeyValueHeader>
  </p.top>
  <p.levelLeft>
    <h1 class="title is-3">
      {{#if @model.isNew}}
        Create a PKI role
      {{else}}
        Edit a
        {{@model.id}}
      {{/if}}
    </h1>
  </p.levelLeft>
</PageHeader>

<form {{on "submit" (perform this.save)}}>
  <div class="box is-sideless is-fullwidth is-marginless">
    <MessageError @errorMessage={{this.errorBanner}} class="has-top-margin-s" />
    {{! ARG TODO write a test for this }}
    <NamespaceReminder @mode={{if @model.isNew "create" "update"}} @noun="PKI role" />
    <FormFieldGroupsLoop @model={{@model}} @mode={{if @model.isNew "create" "update"}} />
  </div>
</form>