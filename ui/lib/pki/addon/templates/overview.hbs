<SecretListHeader
  @model={{this.model.engine}}
  @backendCrumb={{hash
    label=this.model.engine.id
    text=this.model.engine.id
    path="vault.cluster.secrets.backend.list-root"
    model=this.model.engine.id
  }}
  @isEngine={{true}}
/>
<Toolbar>
  <ToolbarActions>
    {{#unless this.model.hasConfig}}
      <ToolbarLink @route="configuration.create">
        Configure PKI
      </ToolbarLink>
    {{/unless}}
  </ToolbarActions>
</Toolbar>

{{#if this.model.hasConfig}}
  {{! TODO show overview items }}
  <div class="selectable-card-container has-grid has-two-col-grid has-top-margin-l">
    {{#if this.canViewIssuers}}
      <Page::SelectableCard
        @cardTitle="Issuer"
        @total={{if (eq this.model.issuers 404) 0 this.model.issuers.length}}
        @subText="The total number of issuers in this PKI mount. Includes both root and intermediate certificates."
        @actionText="View issuers"
        @actionTo="issuers"
        @type="role"
      />
    {{/if}}
    {{#if this.canViewRoles}}
      <Page::SelectableCard
        @cardTitle="Roles"
        @total={{if (eq this.model.roles 404) 0 this.model.roles.length}}
        @subText="The total number of roles in this PKI mount that have been created to generate certificates."
        @actionText="View roles"
        @actionTo="roles"
        @type="role"
      />
    {{/if}}
    <Page::SelectableCardForm
      @title="Issue certificate"
      @subText="Quickly issue a certificate by typing the role name."
      @placeholder="Type to find a role..."
      @buttonText="Issue"
      @options={{this.roles}}
      @navigateToPage={{this.navigateToIssueCertificate}}
      @type="role"
    />
    <Page::SelectableCardForm
      @title="View certificate"
      @subText="Quickly view a certificate by typing its serial number."
      @placeholder="33:a3:..."
      @buttonText="View"
      @options={{this.issuers}}
      @navigateToPage={{this.navigateToViewCertificate}}
      @type="role"
    />
  </div>
{{else}}
  <EmptyState @title="PKI not configured" @message="This PKI mount hasnâ€™t yet been configured with a certificate issuer.">
    <LinkTo @route="configuration.create" @model={{this.model.engine}}>
      Configure PKI
    </LinkTo>
  </EmptyState>
{{/if}}