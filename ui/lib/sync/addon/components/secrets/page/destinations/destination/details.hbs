{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: BUSL-1.1
~}}

<SyncHeader
  @icon={{@destination.icon}}
  @title={{@destination.name}}
  @breadcrumbs={{array
    (hash label="Secrets sync" route="secrets.overview")
    (hash label="Destinations" route="secrets.destinations")
    (hash label="Destination")
  }}
/>

<div class="tabs-container box is-bottomless is-marginless is-paddingless">
  <nav class="tabs" aria-label="destination tabs">
    <ul>
      <LinkTo @route="secrets.destinations.destination.secrets" data-test-tab="Secrets">Secrets</LinkTo>
      <LinkTo @route="secrets.destinations.destination.details" data-test-tab="Details">Details</LinkTo>
    </ul>
  </nav>
</div>

<Toolbar>
  <ToolbarActions>
    <Hds::Button
      data-test-toolbar="Delete destination"
      @text="Delete destination"
      @color="secondary"
      class="toolbar-button"
    />
    <div class="toolbar-separator"></div>
    <Hds::Button
      data-test-toolbar="Sync new secret"
      @text="Sync new secret"
      @icon="chevron-right"
      @iconPosition="trailing"
      @color="secondary"
      class="toolbar-button"
      @route="secrets.destinations.destination.sync"
    />
    <Hds::Button
      data-test-toolbar="Edit destination"
      @text="Edit destination"
      @icon="chevron-right"
      @iconPosition="trailing"
      @color="secondary"
      class="toolbar-button"
      @route="secrets.destinations.destination.edit"
    />
  </ToolbarActions>
</Toolbar>

{{#each @destination.formFields as |field|}}
  {{#let (get @destination field.name) as |value|}}
    {{#if (includes field.name @destination.maskedParams)}}
      <InfoTableRow @label={{or field.options.label (to-label field.name)}}>
        <Hds::Badge @text={{this.credentialValue value}} @icon="check-circle" @color="success" />
      </InfoTableRow>
    {{else}}
      <InfoTableRow @label={{or field.options.label (to-label field.name)}} @value={{value}} />
    {{/if}}
  {{/let}}
{{/each}}