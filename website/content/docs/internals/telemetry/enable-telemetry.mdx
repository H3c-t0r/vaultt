---
layout: docs
page_title: Enable Vault telemetry
description: >-
  Step-by-step guide to enabling telemetry gathering with Vault
---

# Enable Vault telemetry gathering

TBD

## Before you start

- **You must have Vault 1.14 or later installed and running**.
- **You must have access to your [Vault configuration](/vault/docs/configuration) file**.


## Step 1: Choose an aggregation agent

Vault uses the `go-metrics` package to export telemetry and supports the
following aggregation agents for time-series monitoring:

Config prefix | Name                                                             | Company
------------- | ---------------------------------------------------------------- | -------
`circonus`    | [Circonus](https://www.circonus.com)                             | Circonus
`dogstatsd`   | [DogStatsD](https://docs.datadoghq.com/developers/dogstatsd)     | Datadog
`prometheus`  | [Prometheus](https://prometheus.io)                              | Prometheus / Open source
`stackdriver` | [Cloud Operations](https://cloud.google.com/products/operations) | Google
`statsd`      | [Statsd](https://github.com/statsd/statsd/wiki)                  | Open source
`statsite`    | [Statsite](https://github.com/statsite/statsite)                 | Open source


## Step 2: Enable at least one audit device

To include audit-related metrics, you must enable auditing on at least device
with the `vault audit enable` command. For example, to enable auditing for the
`file` device and save the logs to `/var/log/vault_audit.log`:

```shell-session
$ vault audit enable file file_path=/var/log/vault_audit.log
```

By default, Vault replicates audit device configuration to all nodes within a
cluster. Enterprise installations also replicate audit device configuration to
the primary node and all secondaries in a cluster. To disable replication, use
the `local` parameter:

```shell-session
$ vault audit enable file -local file_path=/var/log/vault_audit.log
```


## Step 3: Configure telemetry collection

To configure telemetry collection, update the telemetry stanza in your Vault
configuration with your collection preferences and aggregation agent details.

For example, the following `telemetry` stanza configures Vault with the standard
telemetry defaults and connects it to a Statsite agent running on the default
port within a company intranet at `mycompany.statsite`:

```json
telemetry {
  usage_gauge_period = "10m",
  maximum_gauge_cardinality = 500,
  disable_hostname = false,
  enable_hostname_label = false,
  lease_metrics_epsilon = "1h",
  num_lease_metrics_buckets = 168,
  add_lease_metrics_namespace_labels = false,
  filter_default = true,
  prefix_filter = ["+vault.token", "-vault.expire", "+vault.expire.num_leases"],
  statsite_address = "mycompany.statsite:8125"
}
```

## Step 4: Choose a reporting solution

You need to save or forward your telemetry data to a separate storage solution
for reporting and analysis. Which solution you need depends on the feature set
provided by your aggregation agent and the protocol support of your reporting
platform.

Popular reporting solutions compatible with Vault:

- [Grafana](https://grafana.com/grafana)
- [Graphite](https://www.hostedgraphite.com)
- [InfluxData: Telegraf](https://www.influxdata.com/time-series-platform/telegraf)
- [InfluxData: InfluxDB](https://www.influxdata.com/products/influxdb-overview)
- [InfluxData: Chronograf](https://www.influxdata.com/time-series-platform/telegraf)
- [InfluxData: Kapacitor](https://www.influxdata.com/time-series-platform/kapacitor)
- [Splunk](https://www.splunk.com)


## Next steps

- Review the full list of available
  [telemetry parameters](/vault/docs/configuration/telemetry#telemetry-parameters).
- Review [Monitor telemetry and audit device log data](/vault/tutorials/monitoring/monitor-telemetry-audit-splunk)
  tutorial for general monitoring guidance and steps to configure your
  Vault telemetry for Splunk using Telegraf and Fluentd.
- Review the
  [Monitor telemetry with Prometheus and Grafana](/vault/tutorials/monitoring/monitor-telemetry-grafana-prometheus)
  tutorial to configure your Vault telemetry for Prometheus and Grafana.